<!DOCTYPE HTML>

<html>
	<head>
		<title>Amazon SCSAI Team</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<h1><a href="index.html">Amazon SCSAI</a></h1>
						<nav class="links">
							<ul>
								<li><a href="#">Blogs</a></li>
								<li><a href="#">About US</a></li>
								<li><a href="#">Publications</a></li>
								<li><a href="#">Hiring</a></li>
							</ul>
							<div id="language-toggle">
							    <button onclick="switchLanguage('en')">English</button>
							    <button onclick="switchLanguage('zh')">中文</button>
							</div>
						</nav>
						<nav class="main">
							<ul>
								<li class="search">
									<a class="fa-search" href="#search">Search</a>
									<form id="search" method="get" action="#">
										<input type="text" name="query" placeholder="Search" />
									</form>
								</li>
								<li class="menu">
									<a class="fa-bars" href="#menu">Menu</a>
								</li>
							</ul>
						</nav>
					</header>

				<!-- Menu -->
					<section id="menu">

						<!-- Search -->
							<section>
								<form class="search" method="get" action="#">
									<input type="text" name="query" placeholder="Search" />
								</form>
							</section>

						<!-- Links -->
							<section>
								<ul class="links">
									<li>
										<a href="#">
											<h3>Blogs</h3>
											<p>Original Research and Findings from SCSAI</p>
										</a>
									</li>
									<li>
										<a href="#">
											<h3>About US</h3>
											<p>Learn more about the SCSAI research team</p>
										</a>
									</li>
									<li>
										<a href="#">
											<h3>BPublications</h3>
											<p>Our list of publications</p>
										</a>
									</li>
									<li>
										<a href="#">
											<h3>Hiring</h3>
											<p>Check out our intern and full-time openings</p>
										</a>
									</li>
								</ul>
							</section>

						<!-- Actions -->
							<section>
								<ul class="actions stacked">
									<li><a href="#" class="button large fit">Log In</a></li>
								</ul>
							</section>

					</section>

				<!-- Main -->
					<div id="main">
					    <header>
					        <h1 id="page-title">Blog Posts</h1>
					        <button id="lang-switch">Switch to 中文</button>
					    </header>
					    <section id="posts-container">
					        Loading...
					    </section>

					    <!-- Pagination -->
					    <ul class="actions pagination">
					        <li><a href="#" id="prev-page" class="button large previous">Previous Page</a></li>
					        <li><a href="#" id="next-page" class="button large next">Next Page</a></li>
					    </ul>
					</div>

					<script>
					    const POSTS_PER_PAGE = 5; 
					    let currentPage = 1; 
					    let posts = []; 

					    // Get current language from URL (default: English)
					    const urlParams = new URLSearchParams(window.location.search);
					    let language = urlParams.get("lang") || "en"; 

					    // Function to update URL with new language
					    function switchLanguage() {
					        const newLang = language === "en" ? "zh" : "en";
					        urlParams.set("lang", newLang);
					        window.location.search = urlParams.toString();
					    }

					    // Update the language switch button text
					    document.getElementById("lang-switch").textContent = language === "en" ? "Switch to 中文" : "切换到 English";
					    document.getElementById("lang-switch").addEventListener("click", switchLanguage);

					    // Function to render posts for the current page
					    function renderPosts() {
					        const container = document.getElementById('posts-container');
					        container.innerHTML = ''; 

					        // Calculate pagination indexes
					        const startIndex = (currentPage - 1) * POSTS_PER_PAGE;
					        const endIndex = startIndex + POSTS_PER_PAGE;
					        const postsToRender = posts.slice(startIndex, endIndex);

					        if (postsToRender.length === 0) {
					            container.innerHTML = '<p>No posts available.</p>';
					            return;
					        }

					        postsToRender.forEach(post => {
					            const article = document.createElement('article');
					            article.className = 'post';

					            article.innerHTML = `
					                <header>
					                    <div class="title">
					                        <h2><a href="single.html?post=${post.file[language]}&lang=${language}">${post.title[language]}</a></h2>
					                        <p>${post.full_title[language]}</p>
					                    </div>
					                    <div class="meta">
					                        <time class="published" datetime="${post.date}">${new Date(post.date).toLocaleDateString(language === "zh" ? "zh-CN" : "en-US", { year: 'numeric', month: 'long', day: 'numeric' })}</time>
					                        <a href="#" class="author">
					                            <span class="name">${post.author}</span>
					                            <img src="images/avatar.jpg" alt="Author Avatar" />
					                        </a>
					                    </div>
					                </header>
					                <a href="single.html?post=${post.file[language]}&lang=${language}" class="image featured">
					                    <img src="posts/${post.file[language].replace('.md', '')}/figure1.png" alt="Featured Image" />
					                </a>
					                <p>${post.abstract[language] || ''}</p>
					                <footer>
					                    <ul class="actions">
					                        <li><a href="single.html?post=${post.file[language]}&lang=${language}" class="button large">${language === "zh" ? "继续阅读" : "Continue Reading"}</a></li>
					                    </ul>
					                </footer>
					            `;

					            container.appendChild(article);
					        });

					        updatePaginationControls();
					    }

					    // Function to update pagination buttons
					    function updatePaginationControls() {
					        const prevButton = document.getElementById('prev-page');
					        const nextButton = document.getElementById('next-page');

					        const totalPages = Math.ceil(posts.length / POSTS_PER_PAGE);

					        prevButton.classList.toggle('disabled', currentPage === 1);
					        nextButton.classList.toggle('disabled', currentPage === totalPages);
					    }

					    // Event listeners for pagination buttons
					    document.getElementById('prev-page').addEventListener('click', event => {
					        event.preventDefault();
					        if (currentPage > 1) {
					            currentPage--;
					            renderPosts();
					        }
					    });

					    document.getElementById('next-page').addEventListener('click', event => {
					        event.preventDefault();
					        const totalPages = Math.ceil(posts.length / POSTS_PER_PAGE);
					        if (currentPage < totalPages) {
					            currentPage++;
					            renderPosts();
					        }
					    });

					    // Fetch posts.json and initialize the page
					    fetch('posts/posts.json')
					        .then(response => response.json())
					        .then(data => {
					            posts = data; 
					            renderPosts(); 
					        })
					        .catch(error => {
					            console.error('Error loading posts:', error);
					            document.getElementById('posts-container').innerHTML = '<p>Error loading posts.</p>';
					        });
					</script>


				<!-- Sidebar -->
					<section id="sidebar">

						<!-- Intro -->
							<section id="intro">
								<a href="#" class="logo"><img src="images/logo.png" alt="" /></a>
								<header>
									<h2>Amazon SCSAI</h2>
									<p>Blogs by Search Conversational Science and AI. </a></p>
								</header>
							</section>


						<!-- About -->
							<section class="blurb">
								<h2>About</h2>
								<p>We are the Search and Conversation Science & AI (SCSAI) team at Amazon, consisting of scientists and scholars. We build the future search and conversational experience for shopping, powered by Large Language Models (LLMs).</p>
								<ul class="actions">
									<li><a href="#" class="button">Learn More</a></li>
								</ul>
							</section>

						<!-- Footer -->
							<section id="footer">
								<ul class="icons">
									<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="#" class="icon solid fa-rss"><span class="label">RSS</span></a></li>
									<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
								</ul>
								<p class="copyright">&copy; Amazon SCSAI team.</p>
							</section>

					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>